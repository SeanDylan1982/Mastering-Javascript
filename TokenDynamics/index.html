<!DOCTYPE html>
<html>
<title>Roxi</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
<script src="numeral.js"></script>

<body>
    <div class="w3-container w3-indigo">
        <h1>Roxi Token Dynamics</h1>
    </div>
    <div class="w3-row">
        <div class="w3-col m4 l3">
            <div class="w3-container">
                <div class="w3-panel w3-indigo">
                    <p>Configurations</p>
                </div>
                <form class="w3-container w3-padding-16 w3-border">
                    <label>Roxi Fundraise Target ($)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="fundTarget" value="25000000">

                    <label>Roxi Token Pricing ($)</label>
                    <input class="w3-input w3-margin-bottom" type="number" id="roxiTokenPrice" value="0.25" min="0.00"
                        max="100.00" step="0.01" onchange="calculateSupply()">

                    <label>Roxi Token Supply ($ROXI)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="roxiTokenSupply" value="100000000">

                    <label>Private Sale ($ROXI)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="privateSale" value="80000000">

                    <label>Public Sale ($ROXI)</label>
                    <input class="w3-input" type="text" id="publicSale" value="20000000">
                </form>

                <div class="w3-panel w3-indigo">
                    <p>PT Talisan Emas</p>
                </div>

                <form class="w3-container w3-padding-16 w3-border">
                    <label>Carbon Price ($)</label>
                    <input class="w3-input w3-margin-bottom" type="number" id="carbonPrice" value="8" min="0.00"
                        max="100.00" step="0.50">

                    <label>Land Area (Ha)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="landArea" value="50000">

                    <label>Per-Ha Carbon Credit (Ton)</label>
                    <input class="w3-input w3-margin-bottom" type="number" id="hatonCarbonCredit" value="20" max="1000"
                        step="10">

                    <label>Total Carbon Credit (Ton)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="totalCarbonCredit" value="1000000"
                        onchange="calculatePotentialRevenue()">

                    <label>Potential Revenue ($)</label>
                    <input class="w3-input" type="text" id="potentialRevenue" value="8000000">
                </form>

                <div class="w3-panel w3-indigo">
                    <p>Indicators</p>
                </div>

                <form class="w3-container w3-padding-16 w3-border">
                    <label>Coupon Ratio-per (Ton)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="couponRatio" value="1000">

                    <label>Total Issue Coupon (Coupons)</label>
                    <input class="w3-input w3-margin-bottom" type="text" id="totalIssueCoupons" value="1000">

                    <label>Per-Coupon Price ($)</label>
                    <input class="w3-input" type="text" id="perCouponPrice" value="8000">

                    <label>Per-Roxi Token Price ($)</label>
                    <input class="w3-input" type="number" id="perRoxiTokenPrice" value="0.25" max="100.00" step="0.01">

                    <label>Coupon to Roxi Token ($ROXI)</label>
                    <input class="w3-input" type="text" id="couponToRoxiToken" value="32000">

                    <label>All Coupon to Roxi Token ($ROXI)</label>
                    <input class="w3-input" type="text" id="allCouponToRoxiToken" value="32000000">
                </form>


            </div>
        </div>
        <div class="w3-col m8 l9">
            <div class="w3-panel w3-indigo">
                <p>Data Visualization</p>
            </div>
            <div class="w3-bar w3-margin-top w3-indigo w3-border">
                <button class="w3-bar-item w3-button" onclick="openCity('London')">Coupons</button>
                <button class="w3-bar-item w3-button" onclick="openCity('Paris')">Chart 2</button>
                <button class="w3-bar-item w3-button" onclick="openCity('Tokyo')">Chart 3</button>
            </div>
            <div class="w3-container w3-white w3-border w3-padding-16 w3-section">
                <div id="London" class="city">
                    <canvas id="myChart1" style="max-width:650px;max-height: 385px;"></canvas>
                </div>

                <div id="Paris" class="city" style="display:none">
                    <canvas id="myChart2" style="width:100%;max-width:700px"></canvas>
                </div>

                <div id="Tokyo" class="city" style="display:none">
                    <h2>Tokyo</h2>
                    <p>Tokyo is the capital of Japan.</p>
                </div>
            </div>
            <table class="w3-table w3-bordered w3-border w3-hoverable w3-centered">
                <tr class="w3-indigo">
                    <th>Investor</th>
                    <th>Total Roxi Token</th>
                    <th>Total Fiat Price</th>
                    <th>Total Coupons</th>
                    <th></th>
                </tr>
                <tr>
                    <td>Investor A</td>
                    <td><input class="w3-input" id="iAtotalRoxi" value="10000000" type="text"></td>
                    <td><input class="w3-input" id="iAtotalFiat" type="text"></td>
                    <td><input class="w3-input" id="iAtotalCoupon" type="text"></td>
                    <td><input class="w3-btn w3-amber" type="button" value="Convert" onclick="msg()"></td>
                </tr>
                <tr>
                    <td>Investor B</td>
                    <td><input class="w3-input" id="iBtotalRoxi" value="30000000" type="text"></td>
                    <td><input class="w3-input" id="iBtotalFiat" type="text"></td>
                    <td><input class="w3-input" id="iBtotalCoupon" type="text"></td>
                    <td><input class="w3-btn w3-amber" type="button" value="Convert" onclick="msg()"></td>
                </tr>
                <tr>
                    <td>Investor C</td>
                    <td><input class="w3-input" id="iCtotalRoxi" value="40000000" type="text"></td>
                    <td><input class="w3-input" id="iCtotalFiat" type="text"></td>
                    <td><input class="w3-input" id="iCtotalCoupon" type="text"></td>
                    <td><input class="w3-btn w3-amber" type="button" value="Convert" onclick="msg()"></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input class="w3-input" id="sumtotalRoxi" value="80000000" type="text"></td>
                    <td><input class="w3-input" id="sumtotalFiat" type="text"></td>
                    <td><input class="w3-input" id="sumtotalCoupon" type="text"></td>
                    <td><input class="w3-btn w3-teal" type="button" value="Clear" onclick="msg()"></td>
                </tr>
            </table>
        </div>
    </div>
    </div>
    <div class="w3-row">
        <div class="w3-section"></div>
    </div>
    </div>

    <script>


        window.addEventListener('load', function () {
            PrivatePublicSaleNumberFormat();

            var iAtotalRoxi = document.getElementById("iAtotalRoxi");
            var iAtotalRoxiNumber = numeral(iAtotalRoxi.value);
            iAtotalRoxi.value = iAtotalRoxiNumber.format('0,0');

            var iAtotalFiat = document.getElementById("iAtotalFiat");
            var iAtotalFiatNumber = numeral(iAtotalFiat.value);
            iAtotalFiat.value = iAtotalFiatNumber.format('0,0');

            var iBtotalRoxi = document.getElementById("iBtotalRoxi");
            var iBtotalRoxiNumber = numeral(iBtotalRoxi.value);
            iBtotalRoxi.value = iBtotalRoxiNumber.format('0,0');

            var iCtotalRoxi = document.getElementById("iCtotalRoxi");
            var iCtotalRoxiNumber = numeral(iCtotalRoxi.value);
            iCtotalRoxi.value = iCtotalRoxiNumber.format('0,0');

            var sumtotalRoxi = document.getElementById("sumtotalRoxi");
            var sumtotalRoxiNumber = numeral(sumtotalRoxi.value);
            sumtotalRoxi.value = sumtotalRoxiNumber.format('0,0');

            var sumtotalFiat = document.getElementById("sumtotalFiat");
            var sumtotalFiatNumber = numeral(sumtotalFiat.value);
            sumtotalFiat.value = sumtotalFiatNumber.format('0,0');

            var roxiTokenPrice = document.getElementById("roxiTokenPrice");
            calculateRoxiToFiat();
            calculateRoxiToCoupon();
            roxiTokenPrice.addEventListener("change", function () {
                let perCouponPrice = numeral(document.getElementById("perCouponPrice").value);
                let tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
                let couponToRoxiToken = perCouponPrice.divide(tokenPrice.value());
                document.getElementById("couponToRoxiToken").value = couponToRoxiToken.format('0,0');

                let totalIssueCoupons = numeral(document.getElementById("totalIssueCoupons").value);
                let couponToRoxiToken2 = numeral(document.getElementById("couponToRoxiToken").value);
                let allCouponToRoxiToken = totalIssueCoupons.multiply(couponToRoxiToken2.value());
                document.getElementById("allCouponToRoxiToken").value = allCouponToRoxiToken.format('0,0');

                calculateRoxiToFiat();
                calculateRoxiToCoupon();
                couponVisualizer();
            });

            var iAtotalRoxi = document.getElementById("iAtotalRoxi");
            iAtotalRoxi.addEventListener("keyup", function() {
                calculateRoxiToFiat();
                calculateRoxiToCoupon();
            })

            var iBtotalRoxi = document.getElementById("iBtotalRoxi");
            iBtotalRoxi.addEventListener("keyup", function() {
                calculateRoxiToFiat();
                calculateRoxiToCoupon();
            })

            var iCtotalRoxi = document.getElementById("iCtotalRoxi");
            iCtotalRoxi.addEventListener("keyup", function() {
                calculateRoxiToFiat();
                calculateRoxiToCoupon();
            })

            sumtotalRoxi.addEventListener("keyup", function() {
                calculateRoxiToFiat();
                calculateRoxiToCoupon();
            })

            var fundTarget = document.getElementById("fundTarget");
            var fundTargetNumber = numeral(fundTarget.value);
            fundTarget.value = fundTargetNumber.format('$ 0,0');
            calculateSupply();
            fundTarget.addEventListener("keyup", function () {
                let fundTarget = document.getElementById("fundTarget");
                let fundTargetNumber = numeral(fundTarget.value);
                fundTarget.value = fundTargetNumber.format('$ 0,0');
                calculateSupply();
            })

            var landArea = document.getElementById("landArea");
            var landAreaNumber = numeral(landArea.value);
            landArea.value = landAreaNumber.format('0,0');

            landArea.addEventListener("keyup", function () {
                let landArea = document.getElementById("landArea");
                let landAreaNumber = numeral(landArea.value);
                landArea.value = landAreaNumber.format('0,0');
                calculateCarbonCredit();
            })

            var carbonPrice = document.getElementById("carbonPrice");
            carbonPrice.addEventListener("change", function () {
                calculatePotentialRevenue();
            });

            var hatonCarbonCredit = document.getElementById("hatonCarbonCredit");
            hatonCarbonCredit.addEventListener("change", function () {
                calculateCarbonCredit()
            });

            TalisanFormat();

            var couponRatio = document.getElementById("couponRatio");
            var couponRatioNumber = numeral(couponRatio.value);
            couponRatio.value = couponRatioNumber.format('0,0');
            couponRatio.addEventListener("keyup", function(){
                let couponRatio = document.getElementById("couponRatio");
                let couponRatioNumber = numeral(couponRatio.value);
                couponRatio.value = couponRatioNumber.format('0,0');
                calculateIssuedCoupons();
            });

            IndicatorsNumberFormat();

        });

        function calculateRoxiToFiat() {
            let iAtotalRoxi = numeral(document.getElementById("iAtotalRoxi").value);
            let tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
            let temp = iAtotalRoxi.multiply(tokenPrice.value());
            document.getElementById("iAtotalFiat").value = temp.format('0,0');
            
            let iBtotalRoxi = numeral(document.getElementById("iBtotalRoxi").value);
            tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
            temp = iBtotalRoxi.multiply(tokenPrice.value());
            document.getElementById("iBtotalFiat").value = temp.format('0,0');
            
            let iCtotalRoxi = numeral(document.getElementById("iCtotalRoxi").value);
            tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
            temp = iCtotalRoxi.multiply(tokenPrice.value());
            document.getElementById("iCtotalFiat").value = temp.format('0,0');
            
            let sumtotalRoxi = numeral(document.getElementById("sumtotalRoxi").value);
            tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
            temp = sumtotalRoxi.multiply(tokenPrice.value());
            document.getElementById("sumtotalFiat").value = temp.format('0,0');
        }

        function calculateRoxiToCoupon() {
            let iAtotalRoxi = numeral(document.getElementById("iAtotalRoxi").value);
            let couponToRoxiToken = numeral(document.getElementById("couponToRoxiToken").value);
            let temp = iAtotalRoxi.divide(couponToRoxiToken.value());
            document.getElementById("iAtotalCoupon").value = temp.format('0,0');
            
            let iBtotalRoxi = numeral(document.getElementById("iBtotalRoxi").value);
            couponToRoxiToken = numeral(document.getElementById("couponToRoxiToken").value);
            temp = iBtotalRoxi.divide(couponToRoxiToken.value());
            document.getElementById("iBtotalCoupon").value = temp.format('0,0');
            
            let iCtotalRoxi = numeral(document.getElementById("iCtotalRoxi").value);
            couponToRoxiToken = numeral(document.getElementById("couponToRoxiToken").value);
            temp = iCtotalRoxi.divide(couponToRoxiToken.value());
            document.getElementById("iCtotalCoupon").value = temp.format('0,0');
            
            let sumtotalRoxi = numeral(document.getElementById("sumtotalRoxi").value);
            couponToRoxiToken = numeral(document.getElementById("couponToRoxiToken").value);
            temp = sumtotalRoxi.divide(couponToRoxiToken.value());
            document.getElementById("sumtotalCoupon").value = temp.format('0,0');
        }

        function calculateSupply() {
            let fundTarget = numeral(document.getElementById("fundTarget").value);
            let tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
            let supply = fundTarget.divide(tokenPrice.value());
            document.getElementById("roxiTokenSupply").value = supply.format('0,0');
            document.getElementById("perRoxiTokenPrice").value = document.getElementById("roxiTokenPrice").value;
        }

        function calculateCarbonCredit() {
            let landArea = numeral(document.getElementById("landArea").value);
            let hatonCarbonCredit = numeral(document.getElementById("hatonCarbonCredit").value);
            let totalCarbonCredit = landArea.multiply(hatonCarbonCredit.value());
            document.getElementById("totalCarbonCredit").value = totalCarbonCredit.format('0,0');
            calculatePotentialRevenue();
            calculateIssuedCoupons();
            allCouponToRoxiToken();
        }

        function calculatePotentialRevenue() {
            let carbonPrice = numeral(document.getElementById("carbonPrice").value);
            let totalCarbonCredit = numeral(document.getElementById("totalCarbonCredit").value);
            let potentialRevenue = carbonPrice.multiply(totalCarbonCredit.value());
            document.getElementById("potentialRevenue").value = potentialRevenue.format('$ 0,0');
            perCouponPrice();
            couponToRoxiToken();
            allCouponToRoxiToken();
        }

        function calculateIssuedCoupons() {
            let couponRatio = numeral(document.getElementById("couponRatio").value);
            let totalCarbonCredit = numeral(document.getElementById("totalCarbonCredit").value);
            let totalIssueCoupons = totalCarbonCredit.divide(couponRatio.value());
            document.getElementById("totalIssueCoupons").value = totalIssueCoupons.format('0,0');
            perCouponPrice();
            couponToRoxiToken();
        }

        function perCouponPrice() {
            let couponRatio = numeral(document.getElementById("couponRatio").value);
            let carbonPrice = numeral(document.getElementById("carbonPrice").value);
            let perCouponPrice = couponRatio.multiply(carbonPrice.value());
            document.getElementById("perCouponPrice").value = perCouponPrice.format('0,0');
        }

        function couponToRoxiToken() {
            let perCouponPrice = numeral(document.getElementById("perCouponPrice").value);
            let tokenPrice = numeral(document.getElementById("roxiTokenPrice").value);
            let couponToRoxiToken = perCouponPrice.divide(tokenPrice.value());
            document.getElementById("couponToRoxiToken").value = couponToRoxiToken.format('0,0');
        }

        function allCouponToRoxiToken() {
            let totalIssueCoupons = numeral(document.getElementById("totalIssueCoupons").value);
            let couponToRoxiToken = numeral(document.getElementById("couponToRoxiToken").value);
            let allCouponToRoxiToken = totalIssueCoupons.multiply(couponToRoxiToken.value());
            document.getElementById("allCouponToRoxiToken").value = allCouponToRoxiToken.format('0,0');
        }

        function PrivatePublicSaleNumberFormat() {
            var privateSale = document.getElementById("privateSale");
            var privateSaleNumber = numeral(privateSale.value);
            privateSale.value = privateSaleNumber.format('0,0');

            var publicSale = document.getElementById("publicSale");
            var publicSaleNumber = numeral(publicSale.value);
            publicSale.value = publicSaleNumber.format('0,0');
        }

        function TalisanFormat() {
            var totalCarbonCredit = document.getElementById("totalCarbonCredit");
            var totalCarbonCreditNumber = numeral(totalCarbonCredit.value);
            totalCarbonCredit.value = totalCarbonCreditNumber.format('0,0');

            var potentialRevenue = document.getElementById("potentialRevenue");
            var potentialRevenueNumber = numeral(potentialRevenue.value);
            potentialRevenue.value = potentialRevenueNumber.format('$ 0,0')
        }

        function IndicatorsNumberFormat() {
            var totalIssueCoupons = document.getElementById("totalIssueCoupons");
            var totalIssueCouponsNumber = numeral(totalIssueCoupons.value);
            totalIssueCoupons.value = totalIssueCouponsNumber.format('0,0');

            var perCouponPrice = document.getElementById("perCouponPrice");
            var perCouponPriceNumber = numeral(perCouponPrice.value);
            perCouponPrice.value = perCouponPriceNumber.format('$ 0,0')

            var couponToRoxiToken = document.getElementById("couponToRoxiToken");
            var couponToRoxiTokenNumber = numeral(couponToRoxiToken.value);
            couponToRoxiToken.value = couponToRoxiTokenNumber.format('0,0')

            var allCouponToRoxiToken = document.getElementById("allCouponToRoxiToken");
            var allCouponToRoxiTokenNumber = numeral(allCouponToRoxiToken.value);
            allCouponToRoxiToken.value = allCouponToRoxiTokenNumber.format('0,0');
        }

        

        const ctx = document.getElementById('myChart1');
        const myCouponChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Issued Coupons', 'Private Investor Coupons', 'Difference'],
            datasets: [{
                label: 'Coupons Visualization',
                data: [12, 19, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    function addData(chart, label, data) {
        chart.data.labels.push(label);
        chart.data.datasets.forEach((dataset) => {
            dataset.data.push(data);
        });
        chart.update();
    }

    function removeData(chart) {
        chart.data.labels.pop();
        chart.data.datasets.forEach((dataset) => {
            dataset.data.pop();
        });
        chart.update();
    }

    function couponVisualizer() {
        //addData(myCouponChart,'Coupons Visualization', [10])
        removeData(myCouponChart);
        //addData(myCouponChart,'Coupons Visualization', [10,20,30])
    }


        function openCity(cityName) {
            var i;
            var x = document.getElementsByClassName("city");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            document.getElementById(cityName).style.display = "block";
        }
    </script>

</body>

</html>
